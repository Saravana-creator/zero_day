<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CampusLink - Student Meetings</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../styles/style.css" />
  <link rel="stylesheet" href="../styles/animations.css" />
  <link rel="stylesheet" href="../styles/enhanced-animations.css" />
  <link rel="stylesheet" href="../styles/visual-effects.css" />
  <link rel="stylesheet" href="../styles/navigation.css" />
  <link rel="stylesheet" href="../styles/stylemeet.css" />
</head>
<body>
  <nav class="navbar">
    <div class="container">
      <div class="nav-brand">
        <div class="brand-logo">ğŸ“</div>
        <div class="brand-text">
          <h1>CampusLink</h1>
          <span class="brand-tagline">Student Portal</span>
        </div>
      </div>
      <div class="nav-menu">
        <div class="user-menu">
          <div class="professional-profile-dropdown">
            <button class="profile-trigger-pro" id="profileTrigger">
              <div class="user-avatar-pro">
                <span class="avatar-initial">S</span>
              </div>
              <div class="user-info">
                <span class="user-name">Student</span>
                <span class="user-role">Student</span>
              </div>
              <div class="dropdown-chevron">âŒ„</div>
            </button>
            <div class="profile-dropdown-pro hidden" id="profileDropdown">
              <div class="dropdown-header">
                <div class="user-avatar-large">
                  <span class="avatar-initial-large">S</span>
                </div>
                <div class="user-details">
                  <h4 class="user-full-name">Student</h4>
                  <p class="user-email">student@campuslink.edu</p>
                  <span class="user-status">Active Student</span>
                </div>
              </div>
              <div class="dropdown-divider"></div>
              <div class="dropdown-menu">
                <button class="menu-item" onclick="window.location.href='student_home.html'">
                  <div class="menu-icon">ğŸ </div>
                  <div class="menu-content">
                    <span class="menu-title">Dashboard</span>
                    <span class="menu-subtitle">Back to home</span>
                  </div>
                </button>
                <div class="menu-divider"></div>
                <button class="menu-item logout-item" onclick="window.location.href='../login.html'">
                  <div class="menu-icon">ğŸšª</div>
                  <div class="menu-content">
                    <span class="menu-title">Sign Out</span>
                    <span class="menu-subtitle">End session</span>
                  </div>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <main class="main">
    <section class="dashboard">
      <div class="container">
        <div class="dashboard-header">
          <div class="dashboard-welcome">
            <h2>Study Sessions & Meetings ğŸ“š</h2>
            <p>Join study groups and educational sessions</p>
          </div>
          <div class="tabs">
            <button class="tab-btn active" data-tab="browse">
              <span class="tab-icon">ğŸ”</span>
              <span>Browse Sessions</span>
            </button>
            <button class="tab-btn" data-tab="create">
              <span class="tab-icon">âœ¨</span>
              <span>Share Specialty</span>
            </button>
            <button class="tab-btn" data-tab="my-sessions">
              <span class="tab-icon">ğŸ“š</span>
              <span>My Specialties</span>
            </button>
            <button class="tab-btn" data-tab="sessions">
              <span class="tab-icon">ğŸ¥</span>
              <span>Live Sessions</span>
            </button>
          </div>
        </div>

        <!-- Browse Sessions Tab -->
        <div class="tab-content active" id="browseTab">
          <div class="browse-header">
            <h3>ğŸŒŸ Discover Study Sessions</h3>
            <p>Find and join study groups and educational sessions</p>
          </div>
          <div class="filters-container">
            <div class="filters">
              <div class="filter-group">
                <label for="categoryFilter">ğŸ· Subject</label>
                <select id="categoryFilter">
                  <option value="">All Subjects</option>
                  <option value="Mathematics">ğŸ”¢ Mathematics</option>
                  <option value="Science">ğŸ”¬ Science</option>
                  <option value="Literature">ğŸ“– Literature</option>
                  <option value="History">ğŸ›ï¸ History</option>
                  <option value="Technology">ğŸ’» Technology</option>
                  <option value="Languages">ğŸ—£ï¸ Languages</option>
                  <option value="Other">ğŸ“‹ Other</option>
                </select>
              </div>
              <div class="filter-group">
                <label for="levelFilter">ğŸ“Š Level</label>
                <select id="levelFilter">
                  <option value="">All Levels</option>
                  <option value="Beginner">ğŸŒ± Beginner</option>
                  <option value="Intermediate">ğŸŒ¿ Intermediate</option>
                  <option value="Advanced">ğŸŒ³ Advanced</option>
                </select>
              </div>
              <div class="filter-group search-container">
                <label for="searchInput">ğŸ” Search</label>
                <input type="text" id="searchInput" placeholder="Search study sessions...">
              </div>
            </div>
          </div>
          <div class="browse-controls">
            <div class="skills-count" id="skillsCount"></div>
            <div class="view-controls">
              <button class="btn btn-gradient btn-small" onclick="switchTab('create')" style="margin-right: 10px;">
                <span class="btn-icon">â•</span>
                Add Session
              </button>
              <button class="view-btn active" data-view="grid" title="Grid view">
                <span>âŠ</span>
              </button>
              <button class="view-btn" data-view="list" title="List view">
                <span>â˜°</span>
              </button>
            </div>
          </div>
          <div class="skills-container">
            <div class="skills-grid" id="skillsGrid">
              <!-- Sessions will be loaded here -->
            </div>
            <div class="no-results hidden" id="noResults">
              <div class="no-results-icon">ğŸ”</div>
              <h3>No sessions found</h3>
              <p>Try adjusting your filters or search terms</p>
              <button class="btn btn-outline" onclick="clearFilters()">Clear Filters</button>
            </div>
          </div>
        </div>

        <!-- Create Study Group Tab -->
        <div class="tab-content" id="createTab">
          <div class="create-skill-header">
            <div class="create-icon">ğŸ“š</div>
            <div>
              <h3>âœ¨ Share Your Specialty</h3>
              <p class="create-subtitle">Create sessions in subjects you excel at and help fellow students</p>
            </div>
          </div>
          <div class="create-form-container">
            <form id="createSkillForm" class="create-form">
              <div class="form-section">
                <h4>ğŸ¯ Your Specialty Session</h4>
                <div class="form-group">
                  <label for="skillTitle">ğŸ“š Subject You Can Teach</label>
                  <input type="text" id="skillTitle" placeholder="e.g., Advanced Calculus, Organic Chemistry, Python Programming" required maxlength="100">
                  <div class="char-counter">
                    <span id="skillTitleCounter">0</span>/100 characters
                  </div>
                </div>
                <div class="form-group">
                  <label for="skillDescription">ğŸ“‹ Your Expertise</label>
                  <textarea id="skillDescription" placeholder="Describe your knowledge in this subject, your experience, grades, and what you can teach others..." rows="4" required maxlength="500"></textarea>
                  <div class="char-counter">
                    <span id="skillDescCounter">0</span>/500 characters
                  </div>
                </div>
              </div>

              <div class="form-section">
                <h4>ğŸ· Specialty Details</h4>
                <div class="form-row">
                  <div class="form-group">
                    <label for="skillCategory">ğŸ“‚ Subject</label>
                    <select id="skillCategory" required>
                      <option value="">Choose subject</option>
                      <option value="Mathematics">ğŸ”¢ Mathematics</option>
                      <option value="Science">ğŸ”¬ Science</option>
                      <option value="Literature">ğŸ“– Literature</option>
                      <option value="History">ğŸ›ï¸ History</option>
                      <option value="Technology">ğŸ’» Technology</option>
                      <option value="Languages">ğŸ—£ï¸ Languages</option>
                      <option value="Other">ğŸ“‹ Other</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="skillLevel">ğŸ“Š Difficulty Level</label>
                    <select id="skillLevel" required>
                      <option value="">Select level</option>
                      <option value="Beginner">ğŸŒ± Beginner</option>
                      <option value="Intermediate">ğŸŒ¿ Intermediate</option>
                      <option value="Advanced">ğŸŒ³ Advanced</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="form-section">
                <h4>ğŸ¥ Meeting Link (Optional)</h4>
                <div class="form-group">
                  <label for="meetingLink">ğŸ”— Google Meet Link</label>
                  <input type="url" id="meetingLink" placeholder="https://meet.google.com/xxx-xxxx-xxx">
                  <small class="form-hint">ğŸ’¡ Add a Google Meet link so students can join your session directly</small>
                </div>
              </div>

              <button type="submit" class="btn btn-gradient btn-full">
                <span class="btn-icon">âœ¨</span>
                Share My Specialty
              </button>
            </form>
          </div>
        </div>

        <!-- My Sessions Tab -->
        <div class="tab-content" id="mySkillsTab">
          <div class="my-skills-header">
            <div class="skills-icon">ğŸ“š</div>
            <div>
              <h3>ğŸ† Your Specialties</h3>
              <p class="skills-subtitle">Manage subjects you can teach and help others with</p>
            </div>
          </div>
          <div class="my-skills" id="mySkillsContainer">
            <!-- User's sessions will be loaded here -->
          </div>
        </div>

        <!-- Live Sessions Tab -->
        <div class="tab-content" id="sessionsTab">
          <div class="sessions-section">
            <div class="session-header">
              <div class="session-icon">ğŸ¯</div>
              <div>
                <h3>ğŸš€ Schedule Study Session</h3>
                <p class="session-subtitle">Create live study session with Google Meet</p>
              </div>
            </div>
            
            <div class="session-form-container">
              <form id="createSessionForm" class="session-form">
                <div class="form-section">
                  <h4>ğŸ“š Session Details</h4>
                  <div class="form-group">
                    <label for="sessionSkill">âœ¨ Study Topic</label>
                    <input type="text" id="sessionSkill" placeholder="e.g., Exam Preparation Session" required>
                  </div>
                </div>

                <div class="form-section">
                  <h4>ğŸ“… Schedule</h4>
                  <div class="form-row">
                    <div class="form-group">
                      <label for="sessionDate">ğŸ“† Date</label>
                      <input type="date" id="sessionDate" required>
                    </div>
                    <div class="form-group">
                      <label for="sessionTime">â° Time</label>
                      <input type="time" id="sessionTime" required>
                    </div>
                  </div>
                </div>

                <div class="form-section">
                  <h4>ğŸ‘¥ Participants & Meeting</h4>
                  <div class="form-group">
                    <label for="maxParticipants">ğŸ‘¥ Max Participants</label>
                    <select id="maxParticipants" required>
                      <option value="">Select participant limit</option>
                      <option value="5">5 participants (Small Study Group)</option>
                      <option value="10">10 participants (Medium Group)</option>
                      <option value="15">15 participants (Large Group)</option>
                      <option value="25">25 participants (Class Study)</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="meetingLink">ğŸ¥ Google Meet Link</label>
                    <input type="url" id="meetingLink" placeholder="https://meet.google.com/xxx-xxxx-xxx" required>
                    <small class="form-hint">ğŸ’¡ Create your meeting link at <a href="https://meet.google.com" target="_blank">meet.google.com</a></small>
                  </div>
                </div>

                <button type="submit" class="btn btn-gradient btn-full" id="createSessionBtn">
                  <span class="btn-icon">ğŸš€</span>
                  Start Study Session
                </button>
              </form>
            </div>
            
            <div class="sessions-list">
              <div class="sessions-list-header">
                <h3>ğŸ“‹ Your Study Sessions</h3>
                <div class="sessions-stats" id="sessionsStats">Loading...</div>
              </div>
              <div class="sessions-filter">
                <select id="sessionStatusFilter">
                  <option value="">All Sessions</option>
                  <option value="upcoming">Upcoming</option>
                  <option value="live">Live Now</option>
                  <option value="completed">Completed</option>
                </select>
              </div>
              <div id="sessionsContainer">
                <!-- Sessions will be loaded here -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Notification Container -->
  <div id="notificationContainer"></div>
  
  <!-- Loading Overlay -->
  <div class="loading-overlay hidden" id="loadingOverlay">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p id="loadingText">Loading...</p>
    </div>
  </div>

  <!-- Floating Help Button -->
  <button class="floating-help-btn" id="floatingHelpBtn" title="Need help?">
    <span>â“</span>
  </button>

  <script src="../js/navigation.js"></script>
  <script src="../js/campuslink-app.js"></script>
  <script>
    // Initialize with student context
    document.addEventListener('DOMContentLoaded', function() {
      // Get actual logged-in user
      const loggedUser = localStorage.getItem('currentUser');
      if (loggedUser) {
        const userData = JSON.parse(loggedUser);
        currentUser = {
          id: userData.email,
          name: userData.name || userData.email.split('@')[0],
          email: userData.email,
          role: userData.role
        };
      } else {
        // Fallback for demo
        currentUser = {
          id: 2,
          name: 'Student',
          email: 'student@campuslink.edu',
          role: 'student'
        };
      }
      
      // Initialize app
      showDashboard();
      
      // Profile dropdown functionality
      const profileTrigger = document.getElementById('profileTrigger');
      const profileDropdown = document.getElementById('profileDropdown');
      
      if (profileTrigger && profileDropdown) {
        profileTrigger.addEventListener('click', function(e) {
          e.stopPropagation();
          profileDropdown.classList.toggle('hidden');
        });
        
        document.addEventListener('click', function(e) {
          if (!profileTrigger.contains(e.target) && !profileDropdown.contains(e.target)) {
            profileDropdown.classList.add('hidden');
          }
        });
      }
    });
  </script>
</body>
</html>